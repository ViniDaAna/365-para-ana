<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Entre N√≥s Dois</title>

  <link rel="icon" href="data:," />
  <!-- cache-buster -->
  <link rel="stylesheet" href="style.css?v=20260228_3" />
</head>

<body>

  <!-- LOGIN -->
  <div class="container" id="login">
    <div class="corner-date" id="cornerDateLogin"></div>

    <h1 class="title">Um Lugar S√≥ Nosso</h1>
    <div class="thin-line"></div>
    <p class="subtitle">Digite a data que tudo come√ßou</p>

    <input type="password" id="senha" placeholder="Senha" />
    <br />
    <button type="button" onclick="verificarSenha()">Entrar</button>

    <div class="meta">Dica: o dia em que a gente virou ‚Äún√≥s‚Äù.</div>
  </div>

  <!-- CONTE√öDO -->
  <div class="container hidden" id="conteudo">
    <div class="corner-date" id="cornerDate"></div>

    <div id="fraseContexto" class="meta" style="margin-top:4px;"></div>
    <div id="modoTeste" class="meta hidden" style="margin-top:6px; opacity:.9;"></div>

    <h2 id="tituloTopo" class="title"></h2>
    <div class="thin-line"></div>

    <div id="blocoTexto" class="fade">

      <!-- INTRODU√á√ÉO DE ATO -->
      <div id="introAtoBox" class="extra hidden">
        <div class="extraTag" id="introAtoTag">Novo Ato</div>
        <div class="extraTexto" id="introAtoTexto"></div>
        <button class="btnIntro" id="btnContinuarAto" type="button">Continuar</button>
      </div>

      <!-- POEMA / TEXTO PRINCIPAL -->
      <div class="poema" id="poema"></div>
      <div class="meta" id="meta"></div>

      <!-- ===== ATO 2 ‚Äî SUSSURROS (31‚Äì90) ===== -->
      <div id="ato2Hint" class="ato2Hint hidden" aria-hidden="true">
        <span class="ato2HintDot"></span>
        <span class="ato2HintText">Passe o mouse nas palavras sublinhadas.</span>
      </div>

      <div id="ato2Thought" class="ato2Thought hidden" aria-hidden="true"></div>
      <!-- ===== /ATO 2 ===== -->

      <!-- ===== ATO 1 ‚Äî ENTRELINHAS (1‚Äì30) ===== -->
      <div id="ato1Chave" class="ato1Chave hidden" aria-hidden="true">
        <div class="ato1Label">ENTRELINHAS</div>
        <div class="ato1PalavraWrap">
          <span id="ato1Palavra" class="ato1Palavra"></span>
        </div>
      </div>

      <!-- Dia 30: montagem da frase no centro -->
      <div id="ato1Montagem" class="ato1Montagem hidden" aria-hidden="true"></div>
      <!-- ===== /ATO 1 ===== -->

      <!-- ===== DIA 365 ‚Äî GATILHO DA C√ÅPSULA ===== -->
      <div id="capsulaTrigger" class="capsulaTrigger hidden">
        <div class="capsulaTitle">C√°psula do tempo.</div>
        <div class="capsulaMeta">Escrita em 23/02/2025.</div>
        <button id="btnAbrirCapsula" class="btnCapsula" type="button">Abrir</button>
      </div>
      <!-- ===== /DIA 365 ===== -->

      <!-- ARQUIVO: POEMAS -->
      <div id="arquivoBox" class="arquivoBox hidden">
        <div class="arquivoHeader">
          <button class="ghostBtn" type="button" onclick="voltarParaHoje()">Voltar</button>

          <div class="arquivoHeaderText">
            <div class="titleSmall">Poemas anteriores</div>
            <div class="metaSmall" id="arquivoSub">‚Äî</div>
          </div>

          <div style="width:72px;"></div>
        </div>

        <div class="thin-line" style="margin-top:18px;"></div>

        <!-- ranges -->
        <div class="rangeRow" id="rangeRow"></div>

        <div id="listaArquivo" class="arquivoLista"></div>
      </div>

      <!-- ARQUIVO: MEM√ìRIAS -->
      <div id="memoriasBox" class="arquivoBox hidden">
        <div class="arquivoHeader">
          <button class="ghostBtn" type="button" onclick="voltarParaHoje()">Voltar</button>

          <div class="arquivoHeaderText">
            <div class="titleSmall">Mem√≥rias</div>
            <div class="metaSmall" id="memoriasSub">‚Äî</div>
          </div>

          <div style="width:72px;"></div>
        </div>

        <div class="thin-line" style="margin-top:18px;"></div>

        <div id="listaMemorias" class="arquivoLista"></div>
      </div>

    </div>

    <!-- Bot√µes (normal) -->
    <div class="btnRow" id="botoesNormal">
      <button id="btnAnteriores" type="button" onclick="abrirArquivo()">Poemas anteriores</button>
      <button id="btnMemorias" type="button" onclick="abrirMemorias()">Mem√≥rias</button>
      <button type="button" onclick="mostrarSaudade()">Clique aqui quando estiver com saudade</button>
    </div>

    <!-- Bot√µes (modo arquivo/mem√≥rias) -->
    <div class="btnRow hidden" id="botoesArquivo">
      <button class="ghostBtn" type="button" onclick="voltarParaHoje()">Voltar para o dia de hoje</button>
    </div>

    <div id="saudade" class="saudade hidden">
      Se voc√™ sentiu saudade, √© porque o que temos √© real.
      E eu escolho voc√™ ‚Äî hoje e todos os dias.
    </div>

    <div class="assinatura">Entre n√≥s dois.</div>

    <!-- ===== P√ÅGINA DA C√ÅPSULA (overlay) ===== -->
    <div id="capsulaPage" class="capsulaPage hidden" aria-hidden="true">
      <div class="capsulaTopbar">
        <button class="ghostBtn capsulaBack" id="btnCapsulaVoltar" type="button">Voltar</button>
        <div class="capsulaTopbarTitle">C√°psula do Tempo</div>
        <div style="width:72px;"></div>
      </div>

      <div class="notebook" id="notebook">
        <div class="notebookCover"></div>

        <div class="notebookPaper">
          <div class="capsulaPaperHeader">
            <div class="capsulaPaperTitle">Carta ‚Äì C√°psula do Tempo</div>
            <div class="capsulaPaperDate">23/02/2025</div>
          </div>

          <div id="capsulaCarta" class="capsulaCarta cursiva"></div>

          <div id="capsulaFecho" class="capsulaFecho hidden">
            <div class="capsulaLine"></div>
            <div class="capsulaDecidi">23/02/2025 ‚Äî Eu decidi.</div>
            <button id="btnEscolherDeNovo" class="btnEscolherDeNovo" type="button">Escolher de novo</button>
          </div>
        </div>
      </div>
    </div>
    <!-- ===== /P√ÅGINA DA C√ÅPSULA ===== -->

    <!-- OVERLAY MEM√ìRIA -->
    <div id="memoriaPage" class="memoriaPage hidden" aria-hidden="true">
      <div class="memoriaTopbar">
        <button class="ghostBtn memoriaBack" id="btnMemoriaVoltar" type="button">Voltar</button>
        <div class="memoriaTopbarTitle">Mem√≥ria</div>
        <div style="width:72px;"></div>
      </div>

      <div class="memoriaPaper">
        <div class="memoriaPaperHeader">
          <div class="memoriaPaperTitle" id="memoriaPaperTitle">‚Äî</div>
          <div class="memoriaPaperMeta" id="memoriaPaperMeta">‚Äî</div>
        </div>

        <div id="memoriaPageTexto" class="memoriaPageTexto"></div>
      </div>
    </div>
    <!-- /OVERLAY MEM√ìRIA -->

  </div>

  <!-- Toast -->
  <div id="toastSegredo" class="toast hidden" aria-live="polite"></div>

  <!-- Overlay de fade final (Dia 365) -->
  <div id="fadeOverlay" class="fadeOverlay" aria-hidden="true"></div>

  <script src="poemas.js?v=20260228_3"></script>

  <script>
    const senhaCorreta = "10022024";
    const dataInicioPadrao = new Date("2026-02-24T00:00:00");
    const START_OVERRIDE_KEY = "projeto365_start_override";

    let DIA_ATUAL = 1;
    let DIA_EM_TELA = 1;

    // ===== ATO 1 ‚Äî FRASE (30 palavras) =====
    const ATO1_UNLOCK_KEY = "projeto365_ato1_unlock";
    const ATO1_PALAVRAS = [
      "Eu","te","escolho","todos","os","dias,","mesmo","quando","o","mundo","pesa","e","medo","grita,",
      "porque","amar","voc√™","√©","decis√£o","firme:","transformar","incerteza","em","casa,","sil√™ncio",
      "em","abrigo,","futuro","em","promessa."
    ];

    const INTRO_ATOS = {
      31: { tag: "Ato 2 ‚Äî Conex√£o", texto:
`Agora a gente se permite chegar mais perto.
Menos defesa.
Mais verdade.

Se o Ato 1 foi escolha,
o Ato 2 √© presen√ßa.` },
      91: { tag: "Ato 3 ‚Äî Fogo", texto:
`A intensidade n√£o √© pressa.
√â entrega consciente.

Aqui, o desejo aparece
com eleg√¢ncia ‚Äî e coragem.` },
      151:{ tag: "Ato 4 ‚Äî Crescimento", texto:
`O amor amadurece quando escolhe evoluir.

N√£o √© sobre sentir mais.
√â sobre cuidar melhor.` },
      241:{ tag: "Ato 5 ‚Äî Raiz", texto:
`Agora n√£o √© s√≥ sentir.
√â pertencer.

O que era promessa
vira casa.` },
      331:{ tag: "Ato 6 ‚Äî Recome√ßo", texto:
`Escolher de novo
√© a forma mais madura de amar.

O fim n√£o fecha.
Ele renova.` }
    };

    const segredos = [
      "Eu ainda estou aqui.",
      "Voc√™ chegou. Eu j√° respirei melhor.",
      "Esse lugar √© seu tamb√©m.",
      "Eu escolho voc√™, mesmo nos dias comuns.",
      "Se o mundo estiver barulhento, fica aqui um pouco.",
      "Eu gosto quando voc√™ volta.",
      "O que a gente tem merece cuidado.",
      "Eu n√£o tenho pressa. Eu tenho certeza.",
      "Aqui √© onde eu fico.",
      "Eu penso em voc√™ com calma.",
      "Mesmo em sil√™ncio, eu continuo.",
      "Voc√™ √© a minha decis√£o tranquila.",
      "Se voc√™ ler isso, √© porque existe n√≥s.",
      "Eu guardo voc√™ nas coisas pequenas.",
      "N√£o precisa de nada grandioso. S√≥ de voc√™ aqui."
    ];

    // ‚úÖ MODO TESTE: /?day=60
    function getForcedDay(){
      try{
        const p = new URLSearchParams(location.search);
        const raw = p.get("day");
        if(!raw) return null;
        const n = Number(raw);
        if(Number.isFinite(n) && n >= 0 && n <= 365) return Math.floor(n);
        return null;
      }catch(e){
        return null;
      }
    }

    function showModoTeste(dia){
      const el = document.getElementById("modoTeste");
      if(dia === null){
        el.classList.add("hidden");
        el.textContent = "";
        return;
      }
      el.classList.remove("hidden");
      el.textContent = `Modo teste ativo: Dia ${dia}. (URL: ?day=${dia})`;
    }

    function getDataInicio(){
      const iso = localStorage.getItem(START_OVERRIDE_KEY);
      if(iso && /^\d{4}-\d{2}-\d{2}$/.test(iso)){
        return new Date(iso + "T00:00:00");
      }
      return dataInicioPadrao;
    }

    function diffDias(){
      const dataInicio = getDataInicio();
      const hoje = new Date();
      const H = new Date(hoje.getFullYear(), hoje.getMonth(), hoje.getDate());
      const I = new Date(dataInicio.getFullYear(), dataInicio.getMonth(), dataInicio.getDate());
      return Math.floor((H - I) / (1000*60*60*24));
    }

    function getAto(dia){
      if(dia >= 1 && dia <= 30) return 1;
      if(dia >= 31 && dia <= 90) return 2;
      if(dia >= 91 && dia <= 150) return 3;
      if(dia >= 151 && dia <= 240) return 4;
      if(dia >= 241 && dia <= 330) return 5;
      return 6;
    }

    function getFaixaAto(dia){
      const ato = getAto(dia);
      if(ato === 1) return {start:1, end:30};
      if(ato === 2) return {start:31, end:90};
      if(ato === 3) return {start:91, end:150};
      if(ato === 4) return {start:151, end:240};
      if(ato === 5) return {start:241, end:330};
      return {start:331, end:365};
    }

    function setAuraProgress(dia){
      if(!Number.isFinite(dia) || dia < 1) {
        document.documentElement.style.setProperty("--auraT", "0");
        document.documentElement.style.setProperty("--ato2T", "0");
        return;
      }

      const {start, end} = getFaixaAto(dia);
      const denom = Math.max(1, (end - start));
      const t = (dia - start) / denom;
      const clamped = Math.max(0, Math.min(1, t));
      document.documentElement.style.setProperty("--auraT", clamped.toFixed(4));

      // Ato 2 progress (31‚Äì90)
      if(getAto(dia) === 2){
        const denom2 = Math.max(1, (90 - 31));
        const t2 = (dia - 31) / denom2;
        const c2 = Math.max(0, Math.min(1, t2));
        document.documentElement.style.setProperty("--ato2T", c2.toFixed(4));
      } else {
        document.documentElement.style.setProperty("--ato2T", "0");
      }
    }

    function setTemaPorAto(dia){
      document.body.setAttribute("data-ato", String(getAto(dia)));
      setAuraProgress(dia);
    }

    function setDayAttr(dia){
      if(dia >= 1 && dia <= 365) document.body.setAttribute("data-dia", String(dia));
      else document.body.removeAttribute("data-dia");
    }

    function setCornerDates(){
      const agora = new Date();
      const dd = String(agora.getDate()).padStart(2,'0');
      const mm = String(agora.getMonth()+1).padStart(2,'0');
      const yyyy = agora.getFullYear();
      const data = `${dd}/${mm}/${yyyy}`;
      document.getElementById("cornerDateLogin").innerText = data;
      document.getElementById("cornerDate").innerText = data;
    }

    function aplicarFrasePorHorario(){
      const hora = new Date().getHours();
      const el = document.getElementById("fraseContexto");
      if(hora >= 5 && hora < 12) el.innerText = "Que seu dia seja leve. Eu j√° escolhi voc√™ hoje.";
      else if(hora >= 12 && hora < 18) el.innerText = "No meio do seu dia, eu ainda penso em voc√™.";
      else if(hora >= 18 && hora < 23) el.innerText = "Eu gosto quando voc√™ vem aqui no fim do dia.";
      else el.innerText = "Eu gosto quando voc√™ aparece antes de dormir.";
    }

    function verificarRetorno(){
      const hoje = new Date().toDateString();
      const key = "projeto365_visita";
      const ultima = localStorage.getItem(key);
      if(ultima === hoje){
        const el = document.getElementById("fraseContexto");
        el.innerText += " Voc√™ voltou. Eu gosto disso.";
      }
      localStorage.setItem(key, hoje);
    }

    function revelarBloco(){
      const bloco = document.getElementById("blocoTexto");
      bloco.classList.remove("show");
      void bloco.offsetWidth;
      bloco.classList.add("show");
    }

    let typingTimer = null;
    function typeText(el, text, speed=12, onDone=null){
      clearTimeout(typingTimer);
      el.textContent = "";
      let i = 0;
      function step(){
        el.textContent = text.slice(0, i);
        i++;
        if(i <= text.length){
          typingTimer = setTimeout(step, speed);
        } else {
          if(typeof onDone === "function") onDone();
        }
      }
      step();
    }

    function typeTextHuman(el, text, opts={}){
      const {
        minDelay = 34,
        maxDelay = 68,
        mistakeChance = 0.06,
        maxBackspace = 4,
        pauseChance = 0.05,
        minPause = 220,
        maxPause = 520,
        scrollContainer = null,
        onDone = null
      } = opts;

      clearTimeout(typingTimer);
      el.textContent = "";
      let i = 0;

      function rand(a,b){ return a + Math.random() * (b-a); }
      function nextDelay(){ return Math.floor(rand(minDelay, maxDelay)); }
      function nextPause(){ return Math.floor(rand(minPause, maxPause)); }
      function doScroll(){
        if(scrollContainer && typeof scrollContainer.scrollTop === "number"){
          scrollContainer.scrollTop = scrollContainer.scrollHeight;
        }
      }

      function step(){
        if(Math.random() < pauseChance){
          typingTimer = setTimeout(step, nextPause());
          return;
        }

        if(i > 6 && i < text.length - 6 && Math.random() < mistakeChance){
          const current = el.textContent;
          const n = Math.max(1, Math.floor(rand(1, maxBackspace+1)));
          let j = 0;

          function back(){
            el.textContent = el.textContent.slice(0, -1);
            doScroll();
            j++;
            if(j < Math.min(n, current.length)){
              typingTimer = setTimeout(back, Math.floor(rand(26, 58)));
            } else {
              typingTimer = setTimeout(step, Math.floor(rand(90, 180)));
            }
          }
          back();
          return;
        }

        el.textContent = text.slice(0, i);
        i++;
        doScroll();

        if(i <= text.length){
          typingTimer = setTimeout(step, nextDelay());
        } else {
          doScroll();
          if(typeof onDone === "function") onDone();
        }
      }

      step();
    }

    function pickSegredo(){ return segredos[Math.floor(Math.random() * segredos.length)]; }

    function mostrarToast(texto){
      const toast = document.getElementById("toastSegredo");
      toast.textContent = texto;

      toast.classList.remove("hidden");
      toast.classList.remove("show");
      void toast.offsetWidth;
      toast.classList.add("show");

      clearTimeout(window.__toastTimer);
      window.__toastTimer = setTimeout(() => {
        toast.classList.remove("show");
        setTimeout(() => toast.classList.add("hidden"), 250);
      }, 4200);
    }

    function iniciarSegredo(){
      const cooldownKey = "projeto365_toast";
      const cooldownMs = 2 * 60 * 60 * 1000;

      function resetInatividade(){
        clearTimeout(window.__inatividadeTimer);
        window.__inatividadeTimer = setTimeout(() => {
          if(document.hidden) return;

          const last = Number(localStorage.getItem(cooldownKey) || 0);
          const now = Date.now();

          if(now - last >= cooldownMs){
            localStorage.setItem(cooldownKey, String(now));
            mostrarToast(pickSegredo());
          }
        }, 10000);
      }

      if(window.__segredoInit){
        resetInatividade();
        return;
      }
      window.__segredoInit = true;

      window.addEventListener("mousemove", resetInatividade, {passive:true});
      window.addEventListener("keydown", resetInatividade);
      window.addEventListener("touchstart", resetInatividade, {passive:true});
      window.addEventListener("scroll", resetInatividade, {passive:true});

      document.addEventListener("visibilitychange", () => { if(!document.hidden) resetInatividade(); });
      window.addEventListener("focus", resetInatividade);

      resetInatividade();
    }

    // ===== INTRO DE ATO =====
    function introKeyForDay(dia){ return `projeto365_intro_vista_${dia}`; }
    function deveMostrarIntro(dia){
      if(dia !== DIA_ATUAL) return false;
      if(!INTRO_ATOS[dia]) return false;
      return localStorage.getItem(introKeyForDay(dia)) !== "1";
    }
    function marcarIntroComoVista(dia){ localStorage.setItem(introKeyForDay(dia), "1"); }
    function esconderIntro(){
      const box = document.getElementById("introAtoBox");
      box.classList.add("hidden");
      document.getElementById("introAtoTexto").textContent = "";
    }
    function mostrarIntro(dia){
      const info = INTRO_ATOS[dia];
      const box = document.getElementById("introAtoBox");
      const tag = document.getElementById("introAtoTag");
      const txt = document.getElementById("introAtoTexto");
      const btn = document.getElementById("btnContinuarAto");

      tag.textContent = info.tag;
      txt.textContent = info.texto;

      box.classList.remove("hidden");

      btn.onclick = () => {
        marcarIntroComoVista(dia);
        esconderIntro();
        carregarPoema(dia);
      };
    }

    function animarFolha(direcao){
      const c = document.getElementById("conteudo");
      c.classList.remove("pageflip-in", "pageflip-out");
      void c.offsetWidth;
      c.classList.add(direcao === "in" ? "pageflip-in" : "pageflip-out");

      clearTimeout(window.__flipTimer);
      window.__flipTimer = setTimeout(() => {
        c.classList.remove("pageflip-in", "pageflip-out");
      }, 520);
    }

    function entrarModoLista(titulo){
      document.body.classList.add("modo-arquivo");
      document.getElementById("botoesNormal").classList.add("hidden");
      document.getElementById("botoesArquivo").classList.remove("hidden");
      document.getElementById("saudade").classList.add("hidden");

      document.getElementById("poema").textContent = "";
      document.getElementById("meta").textContent = "";
      esconderIntro();
      esconderCapsulaTrigger();
      fecharCapsulaPage(true);
      fecharMemoriaPage(true);
      esconderAto1UI(true);
      esconderAto2UI(true);

      document.getElementById("tituloTopo").innerText = titulo;
      animarFolha("in");
    }

    function sairModoLista(){
      if(document.body.classList.contains("modo-arquivo")){
        animarFolha("out");
      }
      document.body.classList.remove("modo-arquivo");
      document.getElementById("arquivoBox").classList.add("hidden");
      document.getElementById("memoriasBox").classList.add("hidden");
      document.getElementById("botoesNormal").classList.remove("hidden");
      document.getElementById("botoesArquivo").classList.add("hidden");
    }

    function primeiraLinha(texto){
      if(!texto) return "Sem t√≠tulo";
      const linha = String(texto).split("\n")[0].trim();
      return linha || "Sem t√≠tulo";
    }

    function tituloParaLista(dia){
      const texto = (typeof getPoemaDoDia === "function") ? getPoemaDoDia(dia) : "";
      let t = primeiraLinha(texto);
      if(t.length > 52) t = t.slice(0, 52).trim() + "‚Ä¶";
      return t;
    }

    function buildRanges(maxDay){
      const ranges = [];
      let start = 1;
      while(start <= maxDay){
        const end = Math.min(start + 29, maxDay);
        ranges.push({start, end});
        start += 30;
      }
      return ranges;
    }

    function renderRangeButtons(max){
      const row = document.getElementById("rangeRow");
      row.innerHTML = "";
      const ranges = buildRanges(max);

      function renderList(start, end){
        const lista = document.getElementById("listaArquivo");
        lista.innerHTML = "";
        for(let d = end; d >= start; d--){
          const btn = document.createElement("button");
          btn.type = "button";
          btn.className = "arquivoItem";
          btn.innerHTML =
            `<span class="arquivoDia">Dia ${d}</span>
             <span class="arquivoTitulo">${tituloParaLista(d)}</span>`;
          btn.onclick = () => {
            sairModoLista();
            esconderIntro();
            carregarPoema(d);
          };
          lista.appendChild(btn);
        }
      }

      ranges.forEach((r) => {
        const b = document.createElement("button");
        b.type = "button";
        b.className = "rangeBtn";
        b.textContent = `${r.start}‚Äì${r.end}`;
        b.onclick = () => {
          [...row.querySelectorAll(".rangeBtn")].forEach(x => x.classList.remove("active"));
          b.classList.add("active");
          renderList(r.start, r.end);
        };
        row.appendChild(b);
      });

      const last = ranges[ranges.length - 1];
      if(last){
        row.lastChild.classList.add("active");
        renderList(last.start, last.end);
      }
    }

    function abrirArquivo(){
      if(DIA_ATUAL <= 1) return;

      const max = DIA_ATUAL - 1;
      document.getElementById("arquivoSub").innerText = `Dispon√≠veis: Dias 1 a ${max}`;

      document.getElementById("arquivoBox").classList.remove("hidden");
      document.getElementById("memoriasBox").classList.add("hidden");

      setTemaPorAto(DIA_ATUAL);
      setDayAttr(DIA_ATUAL);

      entrarModoLista("Arquivo");
      renderRangeButtons(max);
    }

    function getMemoryDays(){
      const days = [];
      for(let d = 30; d <= 330; d += 30) days.push(d);
      return days;
    }
    function memoriaTituloPorIndice(idx){ return `Mem√≥ria ${idx + 1}`; }

    function abrirMemorias(){
      const days = getMemoryDays();
      document.getElementById("memoriasSub").innerText = `Total previsto: ${days.length}`;

      const lista = document.getElementById("listaMemorias");
      lista.innerHTML = "";

      days.forEach((diaMem, idx) => {
        const liberada = (DIA_ATUAL >= diaMem);
        const icon = liberada ? "üîì" : "üîí";
        const titulo = memoriaTituloPorIndice(idx);

        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "arquivoItem memoriaItem";
        btn.innerHTML =
          `<span class="lockIcon">${icon}</span>
           <span class="arquivoDia">Dia ${diaMem}</span>
           <span class="arquivoTitulo">${titulo}</span>`;

        btn.onclick = () => abrirMemoriaPage(diaMem, idx);
        lista.appendChild(btn);
      });

      setTemaPorAto(DIA_ATUAL);
      setDayAttr(DIA_ATUAL);

      document.getElementById("arquivoBox").classList.add("hidden");
      document.getElementById("memoriasBox").classList.remove("hidden");
      entrarModoLista("Mem√≥rias");
    }

    function abrirMemoriaPage(diaMem, idx){
      const page = document.getElementById("memoriaPage");
      const titleEl = document.getElementById("memoriaPaperTitle");
      const metaEl = document.getElementById("memoriaPaperMeta");
      const textoEl = document.getElementById("memoriaPageTexto");
      const btnVoltar = document.getElementById("btnMemoriaVoltar");

      const liberada = (DIA_ATUAL >= diaMem);
      const titulo = memoriaTituloPorIndice(idx);

      titleEl.textContent = titulo;

      if(!liberada){
        metaEl.textContent = `Bloqueada at√© o Dia ${diaMem}.`;
        textoEl.textContent = `Quando chegar o Dia ${diaMem}, essa mem√≥ria vai abrir ‚Äî e vai ficar dispon√≠vel pra sempre.`;
      } else {
        metaEl.textContent = `Liberada no Dia ${diaMem}.`;
        const texto = (typeof getMemoriaDoDia === "function") ? getMemoriaDoDia(diaMem) : "";
        const conteudo = texto && texto.trim().length ? texto : "Em breve...";
        textoEl.textContent = "";
        typeText(textoEl, conteudo, 12);
      }

      page.classList.remove("hidden");
      page.setAttribute("aria-hidden", "false");
      document.body.classList.add("memoria-mode");

      btnVoltar.onclick = () => fecharMemoriaPage();
      page.scrollTop = 0;
    }

    function fecharMemoriaPage(silencioso=false){
      const page = document.getElementById("memoriaPage");
      if(!silencioso && page.classList.contains("hidden")) return;
      page.classList.add("hidden");
      page.setAttribute("aria-hidden", "true");
      document.body.classList.remove("memoria-mode");
      document.getElementById("memoriaPageTexto").textContent = "";
    }

    // ===== Dia 365 ‚Äî c√°psula =====
    const CAPSULA_OPEN_KEY = "projeto365_capsula_365_aberta";

    function esconderCapsulaTrigger(){
      document.getElementById("capsulaTrigger").classList.add("hidden");
    }

    function mostrarCapsulaTrigger(){
      const t = document.getElementById("capsulaTrigger");
      const btn = document.getElementById("btnAbrirCapsula");
      t.classList.remove("hidden");
      btn.onclick = () => abrirCapsulaPage();
    }

    function abrirCapsulaPage(){
      const page = document.getElementById("capsulaPage");
      const notebook = document.getElementById("notebook");
      const cartaEl = document.getElementById("capsulaCarta");
      const fecho = document.getElementById("capsulaFecho");
      const btnVoltar = document.getElementById("btnCapsulaVoltar");
      const btnFinal = document.getElementById("btnEscolherDeNovo");

      localStorage.setItem(CAPSULA_OPEN_KEY, "1");

      cartaEl.textContent = "";
      fecho.classList.add("hidden");

      page.classList.remove("hidden");
      page.setAttribute("aria-hidden", "false");
      document.body.classList.add("capsula-mode");

      page.scrollTop = 0;

      notebook.classList.remove("open");
      void notebook.offsetWidth;
      notebook.classList.add("open");

      btnVoltar.onclick = () => fecharCapsulaPage();
      btnFinal.onclick = () => escolherDeNovo();

      clearTimeout(window.__capsulaStartTimer);
      window.__capsulaStartTimer = setTimeout(() => {
        const carta = (typeof getCartaCapsula365 === "function") ? getCartaCapsula365() : "";
        typeTextHuman(cartaEl, carta || "Em breve...", {
          minDelay: 38,
          maxDelay: 82,
          mistakeChance: 0.075,
          maxBackspace: 4,
          pauseChance: 0.07,
          minPause: 260,
          maxPause: 760,
          scrollContainer: page,
          onDone: () => {
            fecho.classList.remove("hidden");
            page.scrollTop = page.scrollHeight;
          }
        });
      }, 640);
    }

    function fecharCapsulaPage(silencioso=false){
      const page = document.getElementById("capsulaPage");
      if(!silencioso && page.classList.contains("hidden")) return;

      page.classList.add("hidden");
      page.setAttribute("aria-hidden", "true");
      document.body.classList.remove("capsula-mode");

      clearTimeout(window.__capsulaStartTimer);
    }

    function clearProjeto365Storage(){
      const keys = [];
      for(let i = 0; i < localStorage.length; i++){
        const k = localStorage.key(i);
        if(k && k.startsWith("projeto365_")) keys.push(k);
      }
      keys.forEach(k => localStorage.removeItem(k));
    }

    function escolherDeNovo(){
      const overlay = document.getElementById("fadeOverlay");
      overlay.classList.add("show");

      setTimeout(() => {
        setTimeout(() => {
          const now = new Date();
          const y = now.getFullYear();
          const m = String(now.getMonth()+1).padStart(2,'0');
          const d = String(now.getDate()).padStart(2,'0');
          const iso = `${y}-${m}-${d}`;

          clearProjeto365Storage();
          localStorage.setItem(START_OVERRIDE_KEY, iso);

          overlay.classList.remove("show");
          fecharCapsulaPage(true);
          carregarHoje();
        }, 1000);
      }, 3000);
    }

    // ===== ATO 1 ‚Äî PROGRESSO + UI =====
    function getAto1Unlocked(){
      const raw = Number(localStorage.getItem(ATO1_UNLOCK_KEY) || 0);
      if(!Number.isFinite(raw)) return 0;
      return Math.max(0, Math.min(30, Math.floor(raw)));
    }

    function setAto1Unlocked(n){
      const clamped = Math.max(0, Math.min(30, Math.floor(n)));
      localStorage.setItem(ATO1_UNLOCK_KEY, String(clamped));
    }

    function esconderAto1UI(silencioso=false){
      const chave = document.getElementById("ato1Chave");
      const palavra = document.getElementById("ato1Palavra");
      const montagem = document.getElementById("ato1Montagem");

      chave.classList.add("hidden");
      chave.setAttribute("aria-hidden","true");
      palavra.textContent = "";

      montagem.classList.add("hidden");
      montagem.classList.remove("show","assemble");
      montagem.setAttribute("aria-hidden","true");
      if(!silencioso) montagem.innerHTML = "";
    }

    function renderAto1Palavra(diaEmTela){
      const chave = document.getElementById("ato1Chave");
      const palavra = document.getElementById("ato1Palavra");
      const montagem = document.getElementById("ato1Montagem");

      if(document.body.classList.contains("modo-arquivo") || document.body.classList.contains("capsula-mode") || document.body.classList.contains("memoria-mode")){
        esconderAto1UI(true);
        return;
      }

      if(diaEmTela < 1 || diaEmTela > 30){
        esconderAto1UI(true);
        return;
      }

      const unlocked = getAto1Unlocked();
      if(diaEmTela > unlocked){
        esconderAto1UI(true);
        return;
      }

      const w = ATO1_PALAVRAS[diaEmTela - 1] || "";
      palavra.textContent = w;

      montagem.classList.add("hidden");
      montagem.classList.remove("show","assemble");
      montagem.setAttribute("aria-hidden","true");

      chave.classList.remove("hidden");
      chave.setAttribute("aria-hidden","false");
    }

    function montarAto1FraseNoCentro(){
      const chave = document.getElementById("ato1Chave");
      const montagem = document.getElementById("ato1Montagem");

      montagem.innerHTML = "";
      montagem.classList.remove("show","assemble");

      chave.classList.add("hidden");
      chave.setAttribute("aria-hidden","true");

      ATO1_PALAVRAS.forEach((w, i) => {
        const s = document.createElement("span");
        s.className = "ato1Word";
        s.textContent = w;
        s.style.transitionDelay = `${60 + i * 28}ms`;
        montagem.appendChild(s);
      });

      montagem.classList.remove("hidden");
      montagem.setAttribute("aria-hidden","false");

      void montagem.offsetWidth;
      montagem.classList.add("show");

      clearTimeout(window.__ato1AssembleTimer);
      window.__ato1AssembleTimer = setTimeout(() => {
        montagem.classList.add("assemble");
      }, 1100);
    }

    // ===== ATO 2 ‚Äî SUSSURROS + LINHAS =====
    const ATO2_PIN_KEY = "projeto365_ato2_pin"; // apenas estado local (opcional)

    function esconderAto2UI(silencioso=false){
      const hint = document.getElementById("ato2Hint");
      const box = document.getElementById("ato2Thought");
      hint.classList.add("hidden");
      hint.setAttribute("aria-hidden","true");

      box.classList.add("hidden");
      box.classList.remove("pinned");
      box.setAttribute("aria-hidden","true");
      if(!silencioso) box.textContent = "";

      if(!silencioso) localStorage.removeItem(ATO2_PIN_KEY);
    }

    function isAto2Ativo(dia){
      if(getAto(dia) !== 2) return false;
      if(document.body.classList.contains("modo-arquivo")) return false;
      if(document.body.classList.contains("capsula-mode")) return false;
      if(document.body.classList.contains("memoria-mode")) return false;
      return true;
    }

    const STOPWORDS_PT = new Set([
      "a","o","os","as","um","uma","uns","umas","de","do","da","dos","das","em","no","na","nos","nas",
      "por","pra","pro","para","com","sem","e","ou","que","se","eu","voc√™","vc","me","te","seu","sua",
      "seus","suas","minha","meu","meus","minhas","num","nunca","j√°","t√¥","to","t√°","ta","√©","foi","ser",
      "s√≥","isso","essa","esse","isso","aqui","ali","l√°","bem","mal","mais","menos","muito","pouco","tamb√©m",
      "como","quando","onde","porque","porqu√™","pq","tem","tinha","tenho","vai","vou","tava","tive","tiver",
      "tudo","nada","ningu√©m","algu√©m","ele","ela","eles","elas","um","uma","ao","√†","√†s","aos"
    ]);

    const ATO2_SUSSURROS = [
      "Eu n√£o quero ganhar. Eu quero entender.",
      "Meu medo costuma falar alto. Eu t√¥ aprendendo a ouvir voc√™ primeiro.",
      "Quando eu fico quieto, nem sempre √© dist√¢ncia. √Äs vezes √© cuidado.",
      "Eu te amo melhor quando eu paro de me defender.",
      "Eu n√£o quero te perder por orgulho bobo.",
      "Eu t√¥ aqui. Mesmo quando eu falho.",
      "O que eu sinto por voc√™ n√£o √© pressa. √â presen√ßa.",
      "Eu n√£o preciso parecer forte com voc√™.",
      "Se eu exagerar, me chama de volta. Eu volto.",
      "Eu aprendi: amor n√£o √© prova. √â const√¢ncia.",
      "Eu n√£o quero te segurar. Eu quero te acolher.",
      "Se eu tiver medo, eu prefiro falar do que sumir.",
      "Voc√™ √© a parte do meu dia que me deixa em paz.",
      "Eu fico. Mesmo quando o ego quer fugir."
    ];

    function hashStr32(s){
      // FNV-1a (r√°pido, determin√≠stico)
      let h = 2166136261 >>> 0;
      for(let i=0;i<s.length;i++){
        h ^= s.charCodeAt(i);
        h = Math.imul(h, 16777619);
      }
      return h >>> 0;
    }

    function mulberry32(seed){
      return function(){
        let t = seed += 0x6D2B79F5;
        t = Math.imul(t ^ (t >>> 15), t | 1);
        t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
        return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
      };
    }

    function normalizeToken(w){
      return String(w)
        .toLowerCase()
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, "")
        .replace(/[^a-z0-9]/g, "");
    }

    function pickAto2WordsDeterministic(text, dia){
      const raw = String(text || "");
      const words = raw.match(/[A-Za-z√Ä-√ø0-9]+(?:'[A-Za-z√Ä-√ø]+)?/g) || [];
      const candidates = [];
      const seen = new Set();

      for(const w of words){
        const norm = normalizeToken(w);
        if(!norm) continue;
        if(norm.length < 4) continue;
        if(STOPWORDS_PT.has(norm)) continue;
        if(seen.has(norm)) continue;
        seen.add(norm);
        candidates.push(w);
      }

      const seed = (dia * 2654435761) ^ hashStr32(raw);
      const rnd = mulberry32(seed >>> 0);

      const desired = candidates.length >= 10 ? 3 : (candidates.length >= 6 ? 2 : 1);
      const picks = [];

      // embaralha determin√≠stico e pega os primeiros
      const shuffled = candidates.slice();
      for(let i = shuffled.length - 1; i > 0; i--){
        const j = Math.floor(rnd() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }

      for(const w of shuffled){
        if(picks.length >= desired) break;
        picks.push(w);
      }

      return picks;
    }

    function escapeHtml(s){
      return String(s)
        .replace(/&/g,"&amp;")
        .replace(/</g,"&lt;")
        .replace(/>/g,"&gt;")
        .replace(/"/g,"&quot;")
        .replace(/'/g,"&#39;");
    }

    function chooseSussurroDeterministic(dia, word){
      const seed = (dia * 2246822519) ^ hashStr32(String(word || ""));
      const rnd = mulberry32(seed >>> 0);
      const idx = Math.floor(rnd() * ATO2_SUSSURROS.length);
      return ATO2_SUSSURROS[idx] || "Eu t√¥ aqui.";
    }

    function wrapAto2Words(text, dia){
      const picks = pickAto2WordsDeterministic(text, dia);
      if(!picks.length) return escapeHtml(text);

      // substitui apenas a PRIMEIRA ocorr√™ncia de cada pick (pra ficar sutil)
      let html = escapeHtml(text);

      picks.forEach((w) => {
        const thought = chooseSussurroDeterministic(dia, w);
        const safeW = escapeHtml(w);
        const safeThought = escapeHtml(thought);

        // regex em cima do HTML escapado √© ok porque estamos usando o token escapado
        // substitui s√≥ a primeira ocorr√™ncia
        const re = new RegExp(`\\b${safeW}\\b`);
        html = html.replace(re, `<span class="thoughtWord" data-thought="${safeThought}">${safeW}</span>`);
      });

      return html;
    }

    function showAto2Hint(){
      const hint = document.getElementById("ato2Hint");
      hint.classList.remove("hidden");
      hint.setAttribute("aria-hidden","false");
    }

    function hideAto2Hint(){
      const hint = document.getElementById("ato2Hint");
      hint.classList.add("hidden");
      hint.setAttribute("aria-hidden","true");
    }

    function showThoughtAt(x, y, text, pin=false){
      const box = document.getElementById("ato2Thought");
      box.textContent = text;

      box.classList.remove("hidden");
      box.setAttribute("aria-hidden","false");

      if(pin){
        box.classList.add("pinned");
        localStorage.setItem(ATO2_PIN_KEY, "1");
      } else {
        box.classList.remove("pinned");
        localStorage.removeItem(ATO2_PIN_KEY);
      }

      // posi√ß√£o: tenta n√£o estourar borda
      const pad = 12;
      const vw = window.innerWidth;
      const vh = window.innerHeight;

      // primeiro coloca, mede, depois ajusta
      box.style.left = `${Math.max(pad, Math.min(vw - pad, x))}px`;
      box.style.top = `${Math.max(pad, Math.min(vh - pad, y))}px`;

      // ajuste fino com bounding box
      const r = box.getBoundingClientRect();
      let nx = x, ny = y;
      if(r.right > vw - pad) nx = vw - pad - r.width;
      if(r.left < pad) nx = pad;
      if(r.bottom > vh - pad) ny = vh - pad - r.height;
      if(r.top < pad) ny = pad;

      box.style.left = `${nx}px`;
      box.style.top = `${ny}px`;
    }

    function hideThought(){
      const box = document.getElementById("ato2Thought");
      box.classList.add("hidden");
      box.classList.remove("pinned");
      box.setAttribute("aria-hidden","true");
      box.textContent = "";
      localStorage.removeItem(ATO2_PIN_KEY);
    }

    function initAto2Interactions(){
      if(window.__ato2Init) return;
      window.__ato2Init = true;

      const poemaEl = document.getElementById("poema");

      // hover (desktop)
      poemaEl.addEventListener("mousemove", (e) => {
        const t = e.target;
        if(!(t instanceof HTMLElement)) return;
        if(!t.classList.contains("thoughtWord")) return;

        const thought = t.getAttribute("data-thought") || "";
        if(!thought) return;

        const box = document.getElementById("ato2Thought");
        if(box.classList.contains("pinned")) return;

        const rect = t.getBoundingClientRect();
        const x = rect.left + rect.width/2;
        const y = rect.top - 10;
        showThoughtAt(x, y, thought, false);
      }, {passive:true});

      poemaEl.addEventListener("mouseleave", () => {
        const box = document.getElementById("ato2Thought");
        if(box.classList.contains("pinned")) return;
        hideThought();
      });

      // click/touch: fixa
      poemaEl.addEventListener("click", (e) => {
        const t = e.target;
        if(!(t instanceof HTMLElement)) return;
        if(!t.classList.contains("thoughtWord")) return;

        const thought = t.getAttribute("data-thought") || "";
        if(!thought) return;

        const rect = t.getBoundingClientRect();
        const x = rect.left + rect.width/2;
        const y = rect.bottom + 10;

        showThoughtAt(x, y, thought, true);
      });

      // click fora: fecha
      document.addEventListener("click", (e) => {
        const box = document.getElementById("ato2Thought");
        if(box.classList.contains("hidden")) return;

        const target = e.target;
        if(!(target instanceof Node)) return;

        if(box.contains(target)) return;
        if(target instanceof HTMLElement && target.classList.contains("thoughtWord")) return;

        hideThought();
      });

      // ESC
      document.addEventListener("keydown", (e) => {
        if(e.key === "Escape"){
          hideThought();
        }
      });
    }

    function aplicarAto2NoPoema(dia){
      if(!isAto2Ativo(dia)){
        esconderAto2UI(true);
        return;
      }

      const poemaEl = document.getElementById("poema");
      const plain = poemaEl.textContent || "";
      if(!plain.trim()) return;

      // converte para HTML com marca√ß√µes
      poemaEl.innerHTML = wrapAto2Words(plain, dia);

      // hint s√≥ no ato 2
      showAto2Hint();

      initAto2Interactions();
    }

    // ===== /ATO 2 =====

    function afterPoemTyped(dia){
      const forced = getForcedDay();
      const isTest = (forced !== null);

      // Ato 1 unlock
      if(!isTest && dia === DIA_ATUAL && dia >= 1 && dia <= 30){
        const current = getAto1Unlocked();
        if(dia > current) setAto1Unlocked(dia);
      }

      // render Ato 1
      renderAto1Palavra(dia);

      if(dia === 30 && getAto1Unlocked() >= 30){
        clearTimeout(window.__ato1FinalTimer);
        window.__ato1FinalTimer = setTimeout(() => {
          montarAto1FraseNoCentro();
        }, 480);
      }

      // Ato 2
      if(getAto(dia) === 2){
        aplicarAto2NoPoema(dia);
      } else {
        esconderAto2UI(true);
      }
    }

    function carregarPoema(dia){
      DIA_EM_TELA = dia;

      const tituloTopo = document.getElementById("tituloTopo");
      const poemaEl = document.getElementById("poema");
      const metaEl = document.getElementById("meta");

      revelarBloco();

      setTemaPorAto(dia);
      setDayAttr(dia);

      esconderCapsulaTrigger();
      fecharCapsulaPage(true);
      fecharMemoriaPage(true);
      esconderAto1UI(true);
      esconderAto2UI(true);

      if(dia <= 0){
        document.body.removeAttribute("data-ato");
        document.body.removeAttribute("data-dia");
        document.documentElement.style.setProperty("--auraT", "0");
        document.documentElement.style.setProperty("--ato2T", "0");
        tituloTopo.innerText = "Antes do primeiro poema";
        metaEl.innerText = "";
        const textoPrefacio = (typeof PREFACIO !== "undefined" && PREFACIO) ? PREFACIO : "Em breve.";
        typeText(poemaEl, textoPrefacio, 14);
        return;
      }

      if(dia > 365){
        tituloTopo.innerText = "365 dias com voc√™";
        metaEl.innerText = "E mesmo assim, eu ainda escolheria voc√™ de novo.";
        typeText(poemaEl, "Fim de um ano.\nE o come√ßo de tudo de novo.", 12);
        return;
      }

      if(dia === 365){
        tituloTopo.innerText = `Dia 365 de 365`;
        metaEl.innerText = "Um poema por dia.";

        const poema365 = (typeof getPoemaDoDia === "function") ? getPoemaDoDia(365) : "";
        typeText(poemaEl, poema365 || "Em breve...", 12, () => {
          mostrarCapsulaTrigger();
        });
        return;
      }

      tituloTopo.innerText = `Dia ${dia} de 365`;
      metaEl.innerText = "Um poema por dia.";

      const texto = (typeof getPoemaDoDia === "function") ? getPoemaDoDia(dia) : "Em breve...";
      typeText(poemaEl, texto, 12, () => afterPoemTyped(dia));
    }

    function carregarHoje(){
      const forced = getForcedDay();
      showModoTeste(forced);

      // ‚úÖ MODO TESTE
      if(forced !== null){
        DIA_ATUAL = forced;

        // simula unlock Ato 1 s√≥ no seu navegador
        if(DIA_ATUAL >= 1 && DIA_ATUAL <= 30){
          const cur = getAto1Unlocked();
          if(DIA_ATUAL > cur) setAto1Unlocked(DIA_ATUAL);
        }

        const btn = document.getElementById("btnAnteriores");
        btn.disabled = (DIA_ATUAL <= 1);
        sairModoLista();

        // ‚úÖ FIX: revela o bloco tamb√©m na intro
        if(deveMostrarIntro(DIA_ATUAL)){
          revelarBloco();

          document.getElementById("tituloTopo").innerText = `Dia ${DIA_ATUAL} de 365`;
          document.getElementById("poema").textContent = "";
          document.getElementById("meta").textContent = "";
          setTemaPorAto(DIA_ATUAL);
          setDayAttr(DIA_ATUAL);
          esconderCapsulaTrigger();
          fecharCapsulaPage(true);
          fecharMemoriaPage(true);
          esconderAto1UI(true);
          esconderAto2UI(true);
          mostrarIntro(DIA_ATUAL);
          return;
        }

        esconderIntro();
        carregarPoema(DIA_ATUAL);
        return;
      }

      // ‚úÖ MODO NORMAL
      const d = diffDias();
      DIA_ATUAL = d + 1;

      aplicarFrasePorHorario();
      verificarRetorno();
      iniciarSegredo();

      const btn = document.getElementById("btnAnteriores");
      btn.disabled = (DIA_ATUAL <= 1);

      sairModoLista();

      if(d < 0){
        esconderIntro();
        carregarPoema(DIA_ATUAL);
        return;
      }

      // ‚úÖ FIX: revela o bloco tamb√©m na intro
      if(deveMostrarIntro(DIA_ATUAL)){
        revelarBloco();

        document.getElementById("tituloTopo").innerText = `Dia ${DIA_ATUAL} de 365`;
        document.getElementById("poema").textContent = "";
        document.getElementById("meta").textContent = "";
        setTemaPorAto(DIA_ATUAL);
        setDayAttr(DIA_ATUAL);
        esconderCapsulaTrigger();
        fecharCapsulaPage(true);
        fecharMemoriaPage(true);
        esconderAto1UI(true);
        esconderAto2UI(true);
        mostrarIntro(DIA_ATUAL);
        return;
      }

      esconderIntro();
      carregarPoema(DIA_ATUAL);
    }

    function voltarParaHoje(){ carregarHoje(); }
    function mostrarSaudade(){ document.getElementById("saudade").classList.toggle("hidden"); }

    function verificarSenha(){
      const senha = document.getElementById("senha").value;
      if(senha === senhaCorreta){
        document.getElementById("login").classList.add("hidden");
        document.getElementById("conteudo").classList.remove("hidden");
        setCornerDates();
        carregarHoje();
      } else {
        alert("Senha incorreta.");
      }
    }

    setCornerDates();
    setInterval(setCornerDates, 60000);
  </script>

</body>
</html>
