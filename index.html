<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Entre Nós Dois</title>

  <link rel="icon" href="data:," />
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <div class="container" id="login">
    <div class="corner-date" id="cornerDateLogin"></div>

    <h1 class="title">Um Lugar Só Nosso</h1>
    <div class="thin-line"></div>
    <p class="subtitle">Digite a data que tudo começou</p>

    <input type="password" id="senha" placeholder="Senha" />
    <br />
    <button onclick="verificarSenha()">Entrar</button>

    <div class="meta">Dica: o dia em que a gente virou “nós”.</div>
  </div>

  <div class="container hidden" id="conteudo">
    <div class="corner-date" id="cornerDate"></div>

    <div id="fraseContexto" class="meta"></div>

    <h2 id="tituloDia" class="title"></h2>
    <div class="thin-line"></div>

    <div id="blocoTexto" class="fade">
      <div class="poema" id="poema"></div>
      <div class="meta" id="meta"></div>
    </div>

    <button onclick="mostrarSaudade()">Clique aqui quando estiver com saudade</button>

    <div id="saudade" class="saudade hidden">
      Se você sentiu saudade, é porque o que temos é real.
      E eu escolho você — hoje e todos os dias.
    </div>

    <div id="segredo" class="assinatura hidden">
      Eu ainda estou aqui.
    </div>

  </div>

  <script src="poemas.js"></script>

  <script>
    const senhaCorreta = "10022024";
    const dataInicio = new Date("2026-02-24T00:00:00");

    function verificarSenha(){
      const senha = document.getElementById("senha").value;
      if(senha === senhaCorreta){
        document.getElementById("login").classList.add("hidden");
        document.getElementById("conteudo").classList.remove("hidden");
        iniciarExperiencia();
      } else {
        alert("Senha incorreta.");
      }
    }

    function iniciarExperiencia(){
      aplicarFrasePorHorario();
      verificarRetorno();
      iniciarSegredo();
      carregarConteudo();
    }

    function aplicarFrasePorHorario(){
      const agora = new Date();
      const hora = agora.getHours();
      const fraseEl = document.getElementById("fraseContexto");

      if(hora >= 5 && hora < 12){
        fraseEl.innerText = "Que seu dia seja leve. Eu já escolhi você hoje.";
      } else if(hora >= 12 && hora < 18){
        fraseEl.innerText = "No meio do seu dia, eu ainda penso em você.";
      } else if(hora >= 18 && hora < 23){
        fraseEl.innerText = "Eu gosto quando você vem aqui no fim do dia.";
      } else {
        fraseEl.innerText = "Eu gosto quando você aparece antes de dormir.";
      }
    }

    function verificarRetorno(){
      const hoje = new Date().toDateString();
      const ultimaVisita = localStorage.getItem("ultimaVisita");

      if(ultimaVisita === hoje){
        document.getElementById("fraseContexto").innerText += " Você voltou. Eu gosto disso.";
      }

      localStorage.setItem("ultimaVisita", hoje);
    }

    function iniciarSegredo(){
      let timer;
      document.addEventListener("mousemove", resetTimer);
      document.addEventListener("keydown", resetTimer);

      function resetTimer(){
        clearTimeout(timer);
        document.getElementById("segredo").classList.add("hidden");
        timer = setTimeout(mostrarSegredo, 10000);
      }

      function mostrarSegredo(){
        document.getElementById("segredo").classList.remove("hidden");
      }

      resetTimer();
    }

    function carregarConteudo(){
      const hoje = new Date();
      const d = Math.floor((hoje - dataInicio) / (1000*60*60*24));
      const diaAtual = d + 1;

      const titulo = document.getElementById("tituloDia");
      const poemaEl = document.getElementById("poema");
      const metaEl = document.getElementById("meta");

      if(d < 0){
        titulo.innerText = "Antes do primeiro poema";
        poemaEl.innerText = "Em breve.";
        return;
      }

      if(diaAtual >= 1 && diaAtual <= 365){
        titulo.innerText = `Dia ${diaAtual} de 365`;
        metaEl.innerText = `Um poema por dia.`;

        const texto =
          (typeof poemas !== "undefined" && poemas[diaAtual - 1])
            ? poemas[diaAtual - 1]
            : "Em breve...";

        poemaEl.innerText = texto;
      }
    }

  </script>

</body>
</html>
